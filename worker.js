(function(){"use strict";function O(n,e){self.onmessage=async a=>{await e;const{name:r,args:i,transferableIndices:c}=a.data,o=[];let s;try{const t=n[r];if(typeof t!="function"){console.error(`${r} is not an exposed worker function`),self.close();return}const p=await t(...i);i.forEach((d,M)=>c.includes(M)&&o.push(d)),s={type:"success",result:p,transferables:o}}catch(t){const{message:p,name:d}=t;s={type:"error",error:{message:p,name:d}}}self.postMessage(s,o)}}function L(n){return(...e)=>{const a={type:"control",name:n,args:e};self.postMessage(a)}}function A(n,e){e=e||{};const{url:a,init:r}=e;return new Promise(i=>{self.Module={...e?.Module,async onRuntimeInitialized(){r&&await r(),i(null)},locateFile(c,o){return(a||o)+c}},importScripts((a||"")+n)})}function T(n,...e){const a=Module.FS[n](...e);if(n!=="mkdir")return a}const _=(n,e)=>e.some(a=>n instanceof a);let I,D;function W(){return I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V(){return D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l=new WeakMap,f=new WeakMap,u=new WeakMap;function N(n){const e=new Promise((a,r)=>{const i=()=>{n.removeEventListener("success",c),n.removeEventListener("error",o)},c=()=>{a(m(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",c),n.addEventListener("error",o)});return u.set(e,n),e}function R(n){if(l.has(n))return;const e=new Promise((a,r)=>{const i=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",o),n.removeEventListener("abort",o)},c=()=>{a(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",c),n.addEventListener("error",o),n.addEventListener("abort",o)});l.set(n,e)}let v={get(n,e,a){if(n instanceof IDBTransaction){if(e==="done")return l.get(n);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return m(n[e])},set(n,e,a){return n[e]=a,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function z(n){v=n(v)}function H(n){return V().includes(n)?function(...e){return n.apply(g(this),e),m(this.request)}:function(...e){return m(n.apply(g(this),e))}}function K(n){return typeof n=="function"?H(n):(n instanceof IDBTransaction&&R(n),_(n,W())?new Proxy(n,v):n)}function m(n){if(n instanceof IDBRequest)return N(n);if(f.has(n))return f.get(n);const e=K(n);return e!==n&&(f.set(n,e),u.set(e,n)),e}const g=n=>u.get(n);function U(n,e,{blocked:a,upgrade:r,blocking:i,terminated:c}={}){const o=indexedDB.open(n,e),s=m(o);return r&&o.addEventListener("upgradeneeded",t=>{r(m(o.result),t.oldVersion,t.newVersion,m(o.transaction),t)}),a&&o.addEventListener("blocked",t=>a(t.oldVersion,t.newVersion,t)),s.then(t=>{c&&t.addEventListener("close",()=>c()),i&&t.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),s}const J=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],h=new Map;function S(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(h.get(e))return h.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,i=X.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||J.includes(a)))return;const c=async function(o,...s){const t=this.transaction(o,i?"readwrite":"readonly");let p=t.store;return r&&(p=p.index(s.shift())),(await Promise.all([p[a](...s),i&&t.done]))[0]};return h.set(e,c),c}z(n=>({...n,get:(e,a,r)=>S(e,a)||n.get(e,a,r),has:(e,a)=>!!S(e,a)||n.has(e,a)}));const G=["continue","continuePrimaryKey","advance"],B={},w=new WeakMap,P=new WeakMap,Q={get(n,e){if(!G.includes(e))return n[e];let a=B[e];return a||(a=B[e]=function(...r){w.set(this,P.get(this)[e](...r))}),a}};async function*Y(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const a=new Proxy(e,Q);for(P.set(a,e),u.set(a,g(e));e;)yield a,e=await(w.get(a)||e.continue()),w.delete(a)}function q(n,e){return e===Symbol.asyncIterator&&_(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&_(n,[IDBIndex,IDBObjectStore])}z(n=>({...n,get(e,a,r){return q(e,a)?Y:n.get(e,a,r)},has(e,a){return q(e,a)||n.has(e,a)}}));const b="hash",$="content";class Z{dbPromise;constructor(e){this.dbPromise=U(e,1,{upgrade(a){a.createObjectStore(b),a.createObjectStore($)}})}async getDB(){return this.dbPromise.catch(()=>{})}async get(e,a,r){const i=await this.getDB();if(await i?.get(b,e)===a)return i.get($,e);const o=await fetch(r);if(!o.ok)throw new Error(`Fail to download ${e}`);const s=await o.arrayBuffer();return await i?.put($,s,e),await i?.put(b,a,e),s}async invalidate(){return(await this.getDB())?.clear(b)}}var nn="\u6719\u6708\u62FC\u97F3",en="\u6719\u6708\u62FC\u97F3\xB7\u8BED\u53E5\u6D41",an="\u7CA4\u8BED\u62FC\u97F3",rn="\u7CA4\u8BED\u62FC\u97F3\xB7IPA",on="\u81EA\u7136\u7801\u53CC\u62FC",cn="\u667A\u80FDABC\u53CC\u62FC",tn="\u5C0F\u9E64\u53CC\u62FC",sn="\u5FAE\u8F6F\u53CC\u62FC",pn="\u62FC\u97F3\u52A0\u52A0\u53CC\u62FC",mn="86\u4E94\u7B14",dn="86\u4E94\u7B14\xB7\u62FC\u97F3",un="86\u4E94\u7B14\xB7\u7E41\u4F53",bn="\u8896\u73CD\u7B80\u62FC",yn="\u5730\u7403\u62FC\u97F3",_n="X-SAMPA",ln="\u4E91\u9F99\u56FD\u9645\u97F3\u6807",fn="\u6CE8\u97F3",vn="\u6CE8\u97F3\xB7\u5FEB\u6253",gn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E03\u6307\u7985",hn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u516B\u6307\u7985",wn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E5D\u6307\u7985",$n="\u5BAB\u4FDD\u62FC\u97F3\xB7\u5341\u6307\u7985",jn="\u4E2D\u53E4\u5168\u62FC",kn="\u4E2D\u53E4\u4E09\u62FC",Mn="\u4ED3\u9889\u4E94\u4EE3",xn="\u4ED3\u9889\u4E94\u4EE3\xB7\u5FEB\u6253",In="\u4E94\u7B14\u753B",Dn="\u884C\u521730",zn="\u4E0A\u6D77\u5434\u8BED\xB7\u8001\u6D3E",Sn="\u4E0A\u6D77\u5434\u8BED\xB7\u65B0\u6D3E",Bn="\u82CF\u5DDE\u5434\u8BED",Pn="\u6253\u5B57\u901F\u8BB0\u6CD5",qn="\u5FEB\u901F\u4ED3\u9889",En="\u901F\u6210",Fn={luna_pinyin:nn,luna_pinyin_fluency:en,jyut6ping3:an,jyut6ping3_ipa:rn,double_pinyin:on,double_pinyin_abc:cn,double_pinyin_flypy:tn,double_pinyin_mspy:sn,double_pinyin_pyjj:pn,wubi86:mn,wubi_pinyin:dn,wubi_trad:un,pinyin_simp:bn,terra_pinyin:yn,ipa_xsampa:_n,ipa_yunlong:ln,bopomofo:fn,bopomofo_express:vn,combo_pinyin:gn,combo_pinyin_8:hn,combo_pinyin_9:wn,combo_pinyin_10:$n,zyenpheng:jn,sampheng:kn,cangjie5:Mn,cangjie5_express:xn,stroke:In,array30:Dn,wugniu_lopha:zn,wugniu:Sn,soutzoe:Bn,stenotype:Pn,scj6:qn,quick5:En},Cn={},On={dict:"luna_pinyin"},Ln={dict:"luna_pinyin",prism:"luna_quanpin"},An={},Tn={dict:"jyut6ping3",prism:"jyut6ping3_ipa"},Wn={dict:"luna_pinyin",prism:"double_pinyin"},Vn={dict:"luna_pinyin",prism:"double_pinyin_abc"},Nn={dict:"luna_pinyin",prism:"double_pinyin_flypy"},Rn={dict:"luna_pinyin",prism:"double_pinyin_mspy"},Hn={dict:"luna_pinyin",prism:"double_pinyin_pyjj"},Kn={},Un={dict:"wubi86",prism:"wubi_pinyin"},Jn={dict:"wubi86",prism:"wubi_trad"},Xn={},Gn={},Qn={},Yn={},Zn={dict:"terra_pinyin",prism:"bopomofo"},ne={dict:"terra_pinyin",prism:"bopomofo_express"},ee={dict:"luna_pinyin",prism:"combo_pinyin"},ae={dict:"luna_pinyin",prism:"combo_pinyin"},ie={dict:"luna_pinyin",prism:"combo_pinyin"},re={dict:"luna_pinyin",prism:"combo_pinyin"},oe={},ce={dict:"zyenpheng",prism:"sampheng"},te={},se={dict:"cangjie5",prism:"cangjie5_express"},pe={},me={},de={},ue={dict:"wugniu_lopha",prism:"wugniu"},be={},ye={dict:"luna_pinyin",prism:"stenotype"},_e={},le={},fe={luna_pinyin:Cn,luna_pinyin_fluency:On,luna_quanpin:Ln,jyut6ping3:An,jyut6ping3_ipa:Tn,double_pinyin:Wn,double_pinyin_abc:Vn,double_pinyin_flypy:Nn,double_pinyin_mspy:Rn,double_pinyin_pyjj:Hn,wubi86:Kn,wubi_pinyin:Un,wubi_trad:Jn,pinyin_simp:Xn,terra_pinyin:Gn,ipa_xsampa:Qn,ipa_yunlong:Yn,bopomofo:Zn,bopomofo_express:ne,combo_pinyin:ee,combo_pinyin_8:ae,combo_pinyin_9:ie,combo_pinyin_10:re,zyenpheng:oe,sampheng:ce,cangjie5:te,cangjie5_express:se,stroke:pe,array30:me,wugniu_lopha:de,wugniu:ue,soutzoe:be,stenotype:ye,scj6:_e,quick5:le},ve="luna-pinyin",ge="luna-pinyin",he="luna-pinyin",we="cantonese",$e="cantonese",je="double-pinyin",ke="double-pinyin",Me="double-pinyin",xe="double-pinyin",Ie="double-pinyin",De="wubi",ze="wubi",Se="wubi",Be="pinyin-simp",Pe="terra-pinyin",qe="ipa",Ee="ipa",Fe="bopomofo",Ce="bopomofo",Oe="combo-pinyin",Le="combo-pinyin",Ae="combo-pinyin",Te="combo-pinyin",We="middle-chinese",Ve="middle-chinese",Ne="cangjie",Re="cangjie",He="stroke",Ke="array",Ue="wugniu",Je="wugniu",Xe="soutzoe",Ge="stenotype",Qe="scj",Ye="quick",Ze={luna_pinyin:ve,luna_pinyin_fluency:ge,luna_quanpin:he,jyut6ping3:we,jyut6ping3_ipa:$e,double_pinyin:je,double_pinyin_abc:ke,double_pinyin_flypy:Me,double_pinyin_mspy:xe,double_pinyin_pyjj:Ie,wubi86:De,wubi_pinyin:ze,wubi_trad:Se,pinyin_simp:Be,terra_pinyin:Pe,ipa_xsampa:qe,ipa_yunlong:Ee,bopomofo:Fe,bopomofo_express:Ce,combo_pinyin:Oe,combo_pinyin_8:Le,combo_pinyin_9:Ae,combo_pinyin_10:Te,zyenpheng:We,sampheng:Ve,cangjie5:Ne,cangjie5_express:Re,stroke:He,array30:Ke,wugniu_lopha:Ue,wugniu:Je,soutzoe:Xe,stenotype:Ge,scj6:Qe,quick5:Ye},na=["stroke"],ea=["stroke"],aa=["luna_pinyin","stroke","cangjie5"],ia=["luna_pinyin","stroke","cangjie5"],ra=["luna_pinyin"],oa=["luna_pinyin"],ca=["luna_pinyin"],ta=["luna_pinyin"],sa=["luna_pinyin"],pa=["pinyin_simp"],ma=["pinyin_simp"],da=["pinyin_simp"],ua=["stroke"],ba=["stroke"],ya=["terra_pinyin","stroke"],_a=["terra_pinyin","stroke"],la=["luna_pinyin"],fa=["luna_pinyin"],va=["luna_pinyin"],ga=["luna_pinyin"],ha=["luna_pinyin"],wa=["luna_pinyin"],$a=["luna_quanpin"],ja=["luna_quanpin"],ka=["luna_pinyin"],Ma=["luna_quanpin"],xa=["luna_pinyin"],Ia=["luna_pinyin"],Da=["luna_pinyin"],za=["luna_pinyin"],Sa=["luna_quanpin"],Ba=["luna_quanpin"],Pa={luna_pinyin:na,luna_pinyin_fluency:ea,jyut6ping3:aa,jyut6ping3_ipa:ia,double_pinyin:ra,double_pinyin_abc:oa,double_pinyin_flypy:ca,double_pinyin_mspy:ta,double_pinyin_pyjj:sa,wubi86:pa,wubi_pinyin:ma,wubi_trad:da,pinyin_simp:ua,terra_pinyin:ba,bopomofo:ya,bopomofo_express:_a,combo_pinyin:la,combo_pinyin_8:fa,combo_pinyin_9:va,combo_pinyin_10:ga,zyenpheng:ha,sampheng:wa,cangjie5:$a,cangjie5_express:ja,stroke:ka,array30:Ma,wugniu_lopha:xa,wugniu:Ia,soutzoe:Da,stenotype:za,scj6:Sa,quick5:Ba},qa=[{name:"jyut6ping3.prism.bin",md5:"f1ebb0ad8afaf49b8af4c385669a674a"},{name:"jyut6ping3.reverse.bin",md5:"92ed6bb8574780366c1a903f4fb010e8"},{name:"jyut6ping3.schema.yaml",md5:"a7ca63a2c115a4f94a1d6dd3456025fc"},{name:"jyut6ping3.table.bin",md5:"546103af8e8794d9ac344820993aeba8"},{name:"jyut6ping3_ipa.prism.bin",md5:"9dc40335a61271aa582ca4f4b00f0f44"},{name:"jyut6ping3_ipa.schema.yaml",md5:"f38558f91b530e2b0c72faa725aeb24b"}],Ea=[{name:"wubi86.prism.bin",md5:"531262bd7dd0b37387480a6be793e992"},{name:"wubi86.reverse.bin",md5:"fd84814998dbcc3feecc117ee8835ee3"},{name:"wubi86.schema.yaml",md5:"8d909e711934ced60b061569e7f78670"},{name:"wubi86.table.bin",md5:"5f9a629c8ed1b254ebe2897474e9d39b"},{name:"wubi_pinyin.prism.bin",md5:"67b7747db86930810dce46bf26f0d5e0"},{name:"wubi_pinyin.schema.yaml",md5:"4c04a659b6eb7371b3c2ec2607a19671"},{name:"wubi_trad.prism.bin",md5:"330f3f5e67cdc152368431d5707a8d60"},{name:"wubi_trad.schema.yaml",md5:"47aff1514de471d8937c1730944dca85"}],Fa=[{name:"ipa_xsampa.prism.bin",md5:"1f89f323b398e55b41a3d51292e153b4"},{name:"ipa_xsampa.reverse.bin",md5:"204c1a057beff33f33e4e6e2334d9388"},{name:"ipa_xsampa.schema.yaml",md5:"3de5dc8e1373f3445eb3eb6372757725"},{name:"ipa_xsampa.table.bin",md5:"2643f70120a14876bf358e77fae47def"},{name:"ipa_yunlong.prism.bin",md5:"e99012d354473ed9251fde4d664cf360"},{name:"ipa_yunlong.reverse.bin",md5:"bb4ede9eca7365defaa9631dacf2d0c6"},{name:"ipa_yunlong.schema.yaml",md5:"bca1844fbfc48f6141d419cb154cbc00"},{name:"ipa_yunlong.table.bin",md5:"ca7388b30a151620453ef1684408c34f"}],Ca=[{name:"bopomofo.prism.bin",md5:"cfdb9263986831e1d21c23654ec3543b"},{name:"bopomofo.schema.yaml",md5:"2c657fdc0c9ac5894f3e4244949f2ef4"},{name:"bopomofo_express.prism.bin",md5:"a12cc380155da94b5fb4e97e0bcffe4f"},{name:"bopomofo_express.schema.yaml",md5:"d15617e84bc8cb6d001dba90c8bf5cfb"}],Oa=[{name:"cangjie5.prism.bin",md5:"b9cf1ba7d30cfcea467771b61422701b"},{name:"cangjie5.reverse.bin",md5:"302de203207d03703306bece4b57d86e"},{name:"cangjie5.schema.yaml",md5:"df8cbfe8269ac88860873e5fc02eb4c5"},{name:"cangjie5.table.bin",md5:"1c854e997f5fe1c7690cd7f40bb4df96"},{name:"cangjie5_express.prism.bin",md5:"75fdabf12b40399baf77cb3c8ee62fe8"},{name:"cangjie5_express.schema.yaml",md5:"8777c77fe530913bb23321a0534b66ec"}],La=[{name:"stroke.prism.bin",md5:"1f26c416eb52ea8f3561138ceb11c6c1"},{name:"stroke.reverse.bin",md5:"a086c66e7d7ce40e4941fcb5d9e349b4"},{name:"stroke.schema.yaml",md5:"44e4e9b9b7560c88374b6227816567d4"},{name:"stroke.table.bin",md5:"797242fa9b16802d8cac5c0f4fafe726"}],Aa=[{name:"array30.prism.bin",md5:"145544e36e59f20cfef6dea90522b2d3"},{name:"array30.reverse.bin",md5:"7f7d287012202461fc5ceb3f9eca2116"},{name:"array30.schema.yaml",md5:"e526324ff344202f5485e87166b73200"},{name:"array30.table.bin",md5:"e6dde610a837ae475807936ae77270d0"}],Ta=[{name:"wugniu.prism.bin",md5:"dbf5abf3515c2fba8a0af549ae9e6061"},{name:"wugniu.schema.yaml",md5:"ee539505db7b3e4503a3a0f4cae62617"},{name:"wugniu_lopha.prism.bin",md5:"f3f5258eafc62e9cd05d697a29dd0e77"},{name:"wugniu_lopha.reverse.bin",md5:"3cd2200a259a83b80fcb356682174ce1"},{name:"wugniu_lopha.schema.yaml",md5:"f548d1bc05160aca287f455e1c94d338"},{name:"wugniu_lopha.table.bin",md5:"89ebfd89994a67472b2378f488338a76"}],Wa=[{name:"soutzoe.prism.bin",md5:"4af9c71a9e69294ca4dab79a4eafcefa"},{name:"soutzoe.reverse.bin",md5:"db12cdab4004bf6efa49542152fb7cfe"},{name:"soutzoe.schema.yaml",md5:"40f575d07cf52d64c1a15c5a58f255a7"},{name:"soutzoe.table.bin",md5:"6239f14f75ec3cbb0d913b6947f8e8c0"}],Va=[{name:"stenotype.prism.bin",md5:"05b48151e467d56753a3f39a039ed0da"},{name:"stenotype.schema.yaml",md5:"0a6f54723a56922d7c73aa8fb654ee05"}],Na=[{name:"scj6.prism.bin",md5:"bd95bef1a1cd46f289c7750337072373"},{name:"scj6.reverse.bin",md5:"efb9d5051b2ce3e4d91a4a8dc4b63027"},{name:"scj6.schema.yaml",md5:"ec5610abdd580e2699f51aa9c36aa8bc"},{name:"scj6.table.bin",md5:"4216472d63de2550ee944ac5e97c557a"}],Ra=[{name:"quick5.prism.bin",md5:"3bde0fa40d486200ce17c45574575cca"},{name:"quick5.reverse.bin",md5:"27444b0d2825ee331e992058d419be34"},{name:"quick5.schema.yaml",md5:"d1fa5bb2d31c5e4130df680aee8c4d0c"},{name:"quick5.table.bin",md5:"25954fec90c31dedb99a45812c7447a9"}],Ha={"luna-pinyin":[{name:"luna_pinyin.prism.bin",md5:"f6c6191302187ebf3d26a4e58e040509"},{name:"luna_pinyin.reverse.bin",md5:"6101a0aa3d7099ce606df5f532c39013"},{name:"luna_pinyin.schema.yaml",md5:"b3555fff5919fb9a87cb7418d50705ea"},{name:"luna_pinyin.table.bin",md5:"75e9555d2989f9beb8f16b1d9181f3a5"},{name:"luna_pinyin_fluency.schema.yaml",md5:"754f317e79fe2eb7b49916080682353a"},{name:"luna_quanpin.prism.bin",md5:"fafc08b9f3102a02244089ec4efaf49d"},{name:"luna_quanpin.schema.yaml",md5:"9aeff9d907c95ba1649f05d9985d166d"}],cantonese:qa,"double-pinyin":[{name:"double_pinyin.prism.bin",md5:"df627e5fe828984e44b0103a852097e7"},{name:"double_pinyin.schema.yaml",md5:"37d4bbe21afc6ecbffef32035853a62f"},{name:"double_pinyin_abc.prism.bin",md5:"6af1da598d96721b5a4d1bc3d56091d1"},{name:"double_pinyin_abc.schema.yaml",md5:"c19a099692bfff3d2292f31cae94f1f3"},{name:"double_pinyin_flypy.prism.bin",md5:"c93478a1b40208da030d44b031552485"},{name:"double_pinyin_flypy.schema.yaml",md5:"20da2434e8413cfee9a16862b5de94e7"},{name:"double_pinyin_mspy.prism.bin",md5:"ce7f1e10306e7ae354589f516ba62b22"},{name:"double_pinyin_mspy.schema.yaml",md5:"da893bb1ccb222953447bc03e28a7aa3"},{name:"double_pinyin_pyjj.prism.bin",md5:"fbf137d29083ed1021a16ca35941705f"},{name:"double_pinyin_pyjj.schema.yaml",md5:"fa420f3c963b79af67c8c52c27cbffc2"}],wubi:Ea,"pinyin-simp":[{name:"pinyin_simp.prism.bin",md5:"396310ce988926a9b042e46367bd7cdc"},{name:"pinyin_simp.reverse.bin",md5:"ca9481c53e46b9e83959059dbed3245f"},{name:"pinyin_simp.schema.yaml",md5:"afd22c2b963905a5784b785d347807ce"},{name:"pinyin_simp.table.bin",md5:"1b3d113faba63c656d600206c44144ff"}],"terra-pinyin":[{name:"terra_pinyin.prism.bin",md5:"b18b47791691f7673836fd5e5acc7356"},{name:"terra_pinyin.reverse.bin",md5:"6dcec3929ee0be53c3b16c64539604b0"},{name:"terra_pinyin.schema.yaml",md5:"e1d2aabdde916f7bb782d4e924b529c7"},{name:"terra_pinyin.table.bin",md5:"3889cac922d8acc149e1498897970f10"}],ipa:Fa,bopomofo:Ca,"combo-pinyin":[{name:"combo_pinyin.prism.bin",md5:"01ffe492d40a49d2194ca06808c233f4"},{name:"combo_pinyin.schema.yaml",md5:"f36f306015be0739be3fe720b349a985"},{name:"combo_pinyin_10.schema.yaml",md5:"94fed0d8c33755f12ba9ec97cc41da35"},{name:"combo_pinyin_8.schema.yaml",md5:"ebd27fb7db368986561c54ad429dd56d"},{name:"combo_pinyin_9.schema.yaml",md5:"e5fc98fcf97bd2d2461d0e5969a8c535"}],"middle-chinese":[{name:"sampheng.prism.bin",md5:"edccb12d4111233c6c02cccd989c195b"},{name:"sampheng.schema.yaml",md5:"47d5a80503aac65038f641958672829b"},{name:"zyenpheng.prism.bin",md5:"7ad3323279ae37dbdaf2dd4b804b8618"},{name:"zyenpheng.reverse.bin",md5:"0d3b84ce7e7b2714cb4a0eea35536d38"},{name:"zyenpheng.schema.yaml",md5:"e7c18923cb4e305362f0b7ae48b2c329"},{name:"zyenpheng.table.bin",md5:"dc2e6122b5e0753e6c12887d21c38195"}],cangjie:Oa,stroke:La,array:Aa,wugniu:Ta,soutzoe:Wa,stenotype:Va,scj:Na,quick:Ra};const j="/rime",Ka="/usr/share/rime-data";function Ua(n,e){return`ime/${n}/${e}`}const Ja=new Z("ime");async function Xa(n){const e=[];function a(i){if(e.includes(i))return[];e.push(i);const c=[];for(const x of Pa[i]||[])c.push(...a(x));const{dict:o,prism:s}=fe[i],t=o||i,p=`${t}.table.bin`,d=`${t}.reverse.bin`,M=`${s||t}.prism.bin`,ni=`${i}.schema.yaml`,F=Ze[i];for(const x of[p,d,M,ni])for(const{name:C,md5:ei}of Ha[F])if(x===C){c.push({name:C,md5:ei,target:F});break}return c}const r=a(n);await Promise.all(r.map(async({name:i,target:c,md5:o})=>{const s=`${Ka}/build/${i}`;try{Module.FS.lookupPath(s)}catch{const t=await Ja.get(i,o,Ua(c,i));Module.FS.writeFile(s,new Uint8Array(t))}}))}async function Ga(n){return k||await Xa(n),Module.ccall("set_ime","null",["string"],[n]),y("write")}function y(n){let e,a;const r=new Promise((i,c)=>{e=i,a=c});return Module.FS.syncfs(n==="read",i=>{i&&a(i),e(null)}),r}const Qa=A("rime.js",{url:"",async init(){Module.FS.mkdir(j),Module.FS.mount(IDBFS,{},j),await y("read"),Module.ccall("init","null",[],[]);for(const[n,e]of Object.entries(Fn))Module.ccall("set_schema_name","null",["string","string"],[n,e])},Module:{printErr(n){const e=n.match(/[EWID]\S+ \S+ \S+ (.*)/);e?{E:console.error,W:console.warn,I:console.info,D:console.debug}[n[0]](e[1]):console.error(n)}}});let k=!1;const Ya=L("deployStatus");globalThis._deployStatus=(n,e)=>{n==="success"&&(k=!0),Ya(n,e)};function E(n){for(const e of Module.FS.readdir(n)){if(e==="."||e==="..")continue;const a=`${n}/${e}`,{mode:r}=Module.FS.lstat(a);Module.FS.isDir(r)?(E(a),Module.FS.rmdir(a)):Module.FS.unlink(a)}}async function Za(){E(j),await y("write"),k=!1,Module.ccall("reset","null",[],[])}O({fsOperate:T,resetUserDirectory:Za,setIME:Ga,setOption(n,e){return Module.ccall("set_option","null",["string","number"],[n,e])},setPageSize(n){return Module.ccall("set_page_size","null",["number"],[n])},deploy(){return Module.ccall("deploy","null",[],[])},async process(n){const e=JSON.parse(Module.ccall("process","string",["string"],[n]));return"committed"in e&&await y("write"),e},selectCandidateOnCurrentPage(n){return Module.ccall("select_candidate_on_current_page","string",["number"],[n])},changePage(n){return Module.ccall("change_page","string",["boolean"],[n])}},Qa)})();
