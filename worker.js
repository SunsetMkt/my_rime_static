(function(){"use strict";function O(e,n){self.onmessage=async a=>{await n;const{name:r,args:i,transferableIndices:c}=a.data,o=[];let s;try{const t=e[r];if(typeof t!="function"){console.error(`${r} is not an exposed worker function`),self.close();return}const p=await t(...i);i.forEach((m,x)=>c.includes(x)&&o.push(m)),s={type:"success",result:p,transferables:o}}catch(t){const{message:p,name:m}=t;s={type:"error",error:{message:p,name:m}}}self.postMessage(s,o)}}function L(e){return(...n)=>{const a={type:"control",name:e,args:n};self.postMessage(a)}}function A(e,n){n=n||{};const{url:a,init:r}=n;return new Promise(i=>{self.Module={...n?.Module,async onRuntimeInitialized(){r&&await r(),i(null)},locateFile(c,o){return(a||o)+c}},importScripts((a||"")+e)})}function T(e,...n){const a=Module.FS[e](...n);if(e!=="mkdir")return a}const _=(e,n)=>n.some(a=>e instanceof a);let I,D;function W(){return I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V(){return D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l=new WeakMap,f=new WeakMap,b=new WeakMap;function N(e){const n=new Promise((a,r)=>{const i=()=>{e.removeEventListener("success",c),e.removeEventListener("error",o)},c=()=>{a(d(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",c),e.addEventListener("error",o)});return b.set(n,e),n}function R(e){if(l.has(e))return;const n=new Promise((a,r)=>{const i=()=>{e.removeEventListener("complete",c),e.removeEventListener("error",o),e.removeEventListener("abort",o)},c=()=>{a(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",c),e.addEventListener("error",o),e.addEventListener("abort",o)});l.set(e,n)}let v={get(e,n,a){if(e instanceof IDBTransaction){if(n==="done")return l.get(e);if(n==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return d(e[n])},set(e,n,a){return e[n]=a,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function z(e){v=e(v)}function H(e){return V().includes(e)?function(...n){return e.apply(g(this),n),d(this.request)}:function(...n){return d(e.apply(g(this),n))}}function K(e){return typeof e=="function"?H(e):(e instanceof IDBTransaction&&R(e),_(e,W())?new Proxy(e,v):e)}function d(e){if(e instanceof IDBRequest)return N(e);if(f.has(e))return f.get(e);const n=K(e);return n!==e&&(f.set(e,n),b.set(n,e)),n}const g=e=>b.get(e);function U(e,n,{blocked:a,upgrade:r,blocking:i,terminated:c}={}){const o=indexedDB.open(e,n),s=d(o);return r&&o.addEventListener("upgradeneeded",t=>{r(d(o.result),t.oldVersion,t.newVersion,d(o.transaction),t)}),a&&o.addEventListener("blocked",t=>a(t.oldVersion,t.newVersion,t)),s.then(t=>{c&&t.addEventListener("close",()=>c()),i&&t.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),s}const J=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],h=new Map;function S(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(h.get(n))return h.get(n);const a=n.replace(/FromIndex$/,""),r=n!==a,i=X.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||J.includes(a)))return;const c=async function(o,...s){const t=this.transaction(o,i?"readwrite":"readonly");let p=t.store;return r&&(p=p.index(s.shift())),(await Promise.all([p[a](...s),i&&t.done]))[0]};return h.set(n,c),c}z(e=>({...e,get:(n,a,r)=>S(n,a)||e.get(n,a,r),has:(n,a)=>!!S(n,a)||e.has(n,a)}));const G=["continue","continuePrimaryKey","advance"],B={},w=new WeakMap,P=new WeakMap,Q={get(e,n){if(!G.includes(n))return e[n];let a=B[n];return a||(a=B[n]=function(...r){w.set(this,P.get(this)[n](...r))}),a}};async function*Y(...e){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...e)),!n)return;n=n;const a=new Proxy(n,Q);for(P.set(a,n),b.set(a,g(n));n;)yield a,n=await(w.get(a)||n.continue()),w.delete(a)}function q(e,n){return n===Symbol.asyncIterator&&_(e,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&_(e,[IDBIndex,IDBObjectStore])}z(e=>({...e,get(n,a,r){return q(n,a)?Y:e.get(n,a,r)},has(n,a){return q(n,a)||e.has(n,a)}}));const u="hash",$="content";class Z{dbPromise;constructor(n){this.dbPromise=U(n,1,{upgrade(a){a.createObjectStore(u),a.createObjectStore($)}})}async getDB(){return this.dbPromise.catch(()=>{})}async get(n,a,r){const i=await this.getDB();if(await i?.get(u,n)===a)return i.get($,n);const o=await fetch(r);if(!o.ok)throw new Error(`Fail to download ${n}`);const s=await o.arrayBuffer();return await i?.put($,s,n),await i?.put(u,a,n),s}async invalidate(){return(await this.getDB())?.clear(u)}}var nn="\u6719\u6708\u62FC\u97F3",en="\u6719\u6708\u62FC\u97F3\xB7\u8BED\u53E5\u6D41",an="\u7CA4\u8BED\u62FC\u97F3",rn="\u7CA4\u8BED\u62FC\u97F3\xB7IPA",on="\u81EA\u7136\u7801\u53CC\u62FC",cn="\u667A\u80FDABC\u53CC\u62FC",tn="\u5C0F\u9E64\u53CC\u62FC",sn="\u5FAE\u8F6F\u53CC\u62FC",pn="\u62FC\u97F3\u52A0\u52A0\u53CC\u62FC",dn="86\u4E94\u7B14",mn="86\u4E94\u7B14\xB7\u62FC\u97F3",bn="86\u4E94\u7B14\xB7\u7E41\u4F53",un="\u8896\u73CD\u7B80\u62FC",yn="\u5730\u7403\u62FC\u97F3",_n="X-SAMPA",ln="\u4E91\u9F99\u56FD\u9645\u97F3\u6807",fn="\u6CE8\u97F3",vn="\u6CE8\u97F3\xB7\u5FEB\u6253",gn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E03\u6307\u7985",hn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u516B\u6307\u7985",wn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E5D\u6307\u7985",$n="\u5BAB\u4FDD\u62FC\u97F3\xB7\u5341\u6307\u7985",jn="\u4E2D\u53E4\u5168\u62FC",kn="\u4E2D\u53E4\u4E09\u62FC",xn="\u4ED3\u9889\u4E94\u4EE3",Mn="\u4ED3\u9889\u4E94\u4EE3\xB7\u5FEB\u6253",In="\u4E94\u7B14\u753B",Dn="\u884C\u521730",zn="\u4E0A\u6D77\u5434\u8BED\xB7\u8001\u6D3E",Sn="\u4E0A\u6D77\u5434\u8BED\xB7\u65B0\u6D3E",Bn="\u82CF\u5DDE\u5434\u8BED",Pn="\u6253\u5B57\u901F\u8BB0\u6CD5",qn="\u5FEB\u901F\u4ED3\u9889",En="\u901F\u6210",Fn={luna_pinyin:nn,luna_pinyin_fluency:en,jyut6ping3:an,jyut6ping3_ipa:rn,double_pinyin:on,double_pinyin_abc:cn,double_pinyin_flypy:tn,double_pinyin_mspy:sn,double_pinyin_pyjj:pn,wubi86:dn,wubi_pinyin:mn,wubi_trad:bn,pinyin_simp:un,terra_pinyin:yn,ipa_xsampa:_n,ipa_yunlong:ln,bopomofo:fn,bopomofo_express:vn,combo_pinyin:gn,combo_pinyin_8:hn,combo_pinyin_9:wn,combo_pinyin_10:$n,zyenpheng:jn,sampheng:kn,cangjie5:xn,cangjie5_express:Mn,stroke:In,array30:Dn,wugniu_lopha:zn,wugniu:Sn,soutzoe:Bn,stenotype:Pn,scj6:qn,quick5:En},Cn={},On={dict:"luna_pinyin"},Ln={dict:"luna_pinyin",prism:"luna_quanpin"},An={},Tn={dict:"jyut6ping3",prism:"jyut6ping3_ipa"},Wn={dict:"luna_pinyin",prism:"double_pinyin"},Vn={dict:"luna_pinyin",prism:"double_pinyin_abc"},Nn={dict:"luna_pinyin",prism:"double_pinyin_flypy"},Rn={dict:"luna_pinyin",prism:"double_pinyin_mspy"},Hn={dict:"luna_pinyin",prism:"double_pinyin_pyjj"},Kn={},Un={dict:"wubi86",prism:"wubi_pinyin"},Jn={dict:"wubi86",prism:"wubi_trad"},Xn={},Gn={},Qn={},Yn={},Zn={dict:"terra_pinyin",prism:"bopomofo"},ne={dict:"terra_pinyin",prism:"bopomofo_express"},ee={dict:"luna_pinyin",prism:"combo_pinyin"},ae={dict:"luna_pinyin",prism:"combo_pinyin"},ie={dict:"luna_pinyin",prism:"combo_pinyin"},re={dict:"luna_pinyin",prism:"combo_pinyin"},oe={},ce={dict:"zyenpheng",prism:"sampheng"},te={},se={dict:"cangjie5",prism:"cangjie5_express"},pe={},de={},me={},be={dict:"wugniu_lopha",prism:"wugniu"},ue={},ye={dict:"luna_pinyin",prism:"stenotype"},_e={},le={},fe={luna_pinyin:Cn,luna_pinyin_fluency:On,luna_quanpin:Ln,jyut6ping3:An,jyut6ping3_ipa:Tn,double_pinyin:Wn,double_pinyin_abc:Vn,double_pinyin_flypy:Nn,double_pinyin_mspy:Rn,double_pinyin_pyjj:Hn,wubi86:Kn,wubi_pinyin:Un,wubi_trad:Jn,pinyin_simp:Xn,terra_pinyin:Gn,ipa_xsampa:Qn,ipa_yunlong:Yn,bopomofo:Zn,bopomofo_express:ne,combo_pinyin:ee,combo_pinyin_8:ae,combo_pinyin_9:ie,combo_pinyin_10:re,zyenpheng:oe,sampheng:ce,cangjie5:te,cangjie5_express:se,stroke:pe,array30:de,wugniu_lopha:me,wugniu:be,soutzoe:ue,stenotype:ye,scj6:_e,quick5:le},ve="luna-pinyin",ge="luna-pinyin",he="luna-pinyin",we="cantonese",$e="cantonese",je="double-pinyin",ke="double-pinyin",xe="double-pinyin",Me="double-pinyin",Ie="double-pinyin",De="wubi",ze="wubi",Se="wubi",Be="pinyin-simp",Pe="terra-pinyin",qe="ipa",Ee="ipa",Fe="bopomofo",Ce="bopomofo",Oe="combo-pinyin",Le="combo-pinyin",Ae="combo-pinyin",Te="combo-pinyin",We="middle-chinese",Ve="middle-chinese",Ne="cangjie",Re="cangjie",He="stroke",Ke="array",Ue="wugniu",Je="wugniu",Xe="soutzoe",Ge="stenotype",Qe="scj",Ye="quick",Ze={luna_pinyin:ve,luna_pinyin_fluency:ge,luna_quanpin:he,jyut6ping3:we,jyut6ping3_ipa:$e,double_pinyin:je,double_pinyin_abc:ke,double_pinyin_flypy:xe,double_pinyin_mspy:Me,double_pinyin_pyjj:Ie,wubi86:De,wubi_pinyin:ze,wubi_trad:Se,pinyin_simp:Be,terra_pinyin:Pe,ipa_xsampa:qe,ipa_yunlong:Ee,bopomofo:Fe,bopomofo_express:Ce,combo_pinyin:Oe,combo_pinyin_8:Le,combo_pinyin_9:Ae,combo_pinyin_10:Te,zyenpheng:We,sampheng:Ve,cangjie5:Ne,cangjie5_express:Re,stroke:He,array30:Ke,wugniu_lopha:Ue,wugniu:Je,soutzoe:Xe,stenotype:Ge,scj6:Qe,quick5:Ye},na=["stroke"],ea=["stroke"],aa=["luna_pinyin","stroke","cangjie5"],ia=["luna_pinyin","stroke","cangjie5"],ra=["luna_pinyin"],oa=["luna_pinyin"],ca=["luna_pinyin"],ta=["luna_pinyin"],sa=["luna_pinyin"],pa=["pinyin_simp"],da=["pinyin_simp"],ma=["pinyin_simp"],ba=["stroke"],ua=["stroke"],ya=["terra_pinyin","stroke"],_a=["terra_pinyin","stroke"],la=["luna_pinyin"],fa=["luna_pinyin"],va=["luna_pinyin"],ga=["luna_pinyin"],ha=["luna_pinyin"],wa=["luna_pinyin"],$a=["luna_quanpin"],ja=["luna_quanpin"],ka=["luna_pinyin"],xa=["luna_quanpin"],Ma=["luna_pinyin"],Ia=["luna_pinyin"],Da=["luna_pinyin"],za=["luna_pinyin"],Sa=["luna_quanpin"],Ba=["luna_quanpin"],Pa={luna_pinyin:na,luna_pinyin_fluency:ea,jyut6ping3:aa,jyut6ping3_ipa:ia,double_pinyin:ra,double_pinyin_abc:oa,double_pinyin_flypy:ca,double_pinyin_mspy:ta,double_pinyin_pyjj:sa,wubi86:pa,wubi_pinyin:da,wubi_trad:ma,pinyin_simp:ba,terra_pinyin:ua,bopomofo:ya,bopomofo_express:_a,combo_pinyin:la,combo_pinyin_8:fa,combo_pinyin_9:va,combo_pinyin_10:ga,zyenpheng:ha,sampheng:wa,cangjie5:$a,cangjie5_express:ja,stroke:ka,array30:xa,wugniu_lopha:Ma,wugniu:Ia,soutzoe:Da,stenotype:za,scj6:Sa,quick5:Ba},qa=[{name:"jyut6ping3.prism.bin",md5:"e8fe84f1b8c1820fd2c08f7600418bfe"},{name:"jyut6ping3.reverse.bin",md5:"92ed6bb8574780366c1a903f4fb010e8"},{name:"jyut6ping3.schema.yaml",md5:"d0fc61e25feffc2526bb4e98e16bbde6"},{name:"jyut6ping3.table.bin",md5:"546103af8e8794d9ac344820993aeba8"},{name:"jyut6ping3_ipa.prism.bin",md5:"490482d2d6d1feed536d78dd9b02e853"},{name:"jyut6ping3_ipa.schema.yaml",md5:"bc1fc01dbaeb836c2e5aa5017ecd8b94"}],Ea=[{name:"wubi86.prism.bin",md5:"e40fe2db3e26f1f9efb1ea0bde2a343d"},{name:"wubi86.reverse.bin",md5:"fd84814998dbcc3feecc117ee8835ee3"},{name:"wubi86.schema.yaml",md5:"4c66187568b199a1a50026a13e1dde4b"},{name:"wubi86.table.bin",md5:"5f9a629c8ed1b254ebe2897474e9d39b"},{name:"wubi_pinyin.prism.bin",md5:"67b7747db86930810dce46bf26f0d5e0"},{name:"wubi_pinyin.schema.yaml",md5:"4c04a659b6eb7371b3c2ec2607a19671"},{name:"wubi_trad.prism.bin",md5:"330f3f5e67cdc152368431d5707a8d60"},{name:"wubi_trad.schema.yaml",md5:"47aff1514de471d8937c1730944dca85"}],Fa=[{name:"ipa_xsampa.prism.bin",md5:"1f89f323b398e55b41a3d51292e153b4"},{name:"ipa_xsampa.reverse.bin",md5:"204c1a057beff33f33e4e6e2334d9388"},{name:"ipa_xsampa.schema.yaml",md5:"3de5dc8e1373f3445eb3eb6372757725"},{name:"ipa_xsampa.table.bin",md5:"2643f70120a14876bf358e77fae47def"},{name:"ipa_yunlong.prism.bin",md5:"e99012d354473ed9251fde4d664cf360"},{name:"ipa_yunlong.reverse.bin",md5:"bb4ede9eca7365defaa9631dacf2d0c6"},{name:"ipa_yunlong.schema.yaml",md5:"bca1844fbfc48f6141d419cb154cbc00"},{name:"ipa_yunlong.table.bin",md5:"ca7388b30a151620453ef1684408c34f"}],Ca=[{name:"bopomofo.prism.bin",md5:"234e19133234e3c3b096aec7d4cebc25"},{name:"bopomofo.schema.yaml",md5:"2c657fdc0c9ac5894f3e4244949f2ef4"},{name:"bopomofo_express.prism.bin",md5:"166c04c549fe673e7b073b93c84832b0"},{name:"bopomofo_express.schema.yaml",md5:"d15617e84bc8cb6d001dba90c8bf5cfb"}],Oa=[{name:"cangjie5.prism.bin",md5:"7c10c8c339b19bb129bcab4423a41e02"},{name:"cangjie5.reverse.bin",md5:"bad7560cb46301580e83d887501dffd9"},{name:"cangjie5.schema.yaml",md5:"fa91cc2e81a964b9a5099dcd1e234943"},{name:"cangjie5.table.bin",md5:"595a57147cebce4132f8aca32e77da7a"},{name:"cangjie5_express.prism.bin",md5:"b4aab3c0512490f8356f893a2fe0462d"},{name:"cangjie5_express.schema.yaml",md5:"8777c77fe530913bb23321a0534b66ec"}],La=[{name:"stroke.prism.bin",md5:"1f26c416eb52ea8f3561138ceb11c6c1"},{name:"stroke.reverse.bin",md5:"a086c66e7d7ce40e4941fcb5d9e349b4"},{name:"stroke.schema.yaml",md5:"44e4e9b9b7560c88374b6227816567d4"},{name:"stroke.table.bin",md5:"797242fa9b16802d8cac5c0f4fafe726"}],Aa=[{name:"array30.prism.bin",md5:"0e97da41ec8391c54d19f11071058393"},{name:"array30.reverse.bin",md5:"7f7d287012202461fc5ceb3f9eca2116"},{name:"array30.schema.yaml",md5:"7afec43f8ea020d44cbadc9bdefe2562"},{name:"array30.table.bin",md5:"e6dde610a837ae475807936ae77270d0"}],Ta=[{name:"wugniu.prism.bin",md5:"dbf5abf3515c2fba8a0af549ae9e6061"},{name:"wugniu.schema.yaml",md5:"ee539505db7b3e4503a3a0f4cae62617"},{name:"wugniu_lopha.prism.bin",md5:"f3f5258eafc62e9cd05d697a29dd0e77"},{name:"wugniu_lopha.reverse.bin",md5:"3cd2200a259a83b80fcb356682174ce1"},{name:"wugniu_lopha.schema.yaml",md5:"f548d1bc05160aca287f455e1c94d338"},{name:"wugniu_lopha.table.bin",md5:"89ebfd89994a67472b2378f488338a76"}],Wa=[{name:"soutzoe.prism.bin",md5:"4af9c71a9e69294ca4dab79a4eafcefa"},{name:"soutzoe.reverse.bin",md5:"db12cdab4004bf6efa49542152fb7cfe"},{name:"soutzoe.schema.yaml",md5:"40f575d07cf52d64c1a15c5a58f255a7"},{name:"soutzoe.table.bin",md5:"6239f14f75ec3cbb0d913b6947f8e8c0"}],Va=[{name:"stenotype.prism.bin",md5:"1df2aa4b1d705d88004246ce33f9b0bb"},{name:"stenotype.schema.yaml",md5:"0a6f54723a56922d7c73aa8fb654ee05"}],Na=[{name:"scj6.prism.bin",md5:"bd95bef1a1cd46f289c7750337072373"},{name:"scj6.reverse.bin",md5:"efb9d5051b2ce3e4d91a4a8dc4b63027"},{name:"scj6.schema.yaml",md5:"ec5610abdd580e2699f51aa9c36aa8bc"},{name:"scj6.table.bin",md5:"4216472d63de2550ee944ac5e97c557a"}],Ra=[{name:"quick5.prism.bin",md5:"3bde0fa40d486200ce17c45574575cca"},{name:"quick5.reverse.bin",md5:"27444b0d2825ee331e992058d419be34"},{name:"quick5.schema.yaml",md5:"d1fa5bb2d31c5e4130df680aee8c4d0c"},{name:"quick5.table.bin",md5:"25954fec90c31dedb99a45812c7447a9"}],Ha={"luna-pinyin":[{name:"luna_pinyin.prism.bin",md5:"353c5e34c859a9a0e76900df030fa713"},{name:"luna_pinyin.reverse.bin",md5:"d16701cc9cc16ab74f3b60b336409bf1"},{name:"luna_pinyin.schema.yaml",md5:"e9b840d9205f8425a98bd05122ba0fb9"},{name:"luna_pinyin.table.bin",md5:"153ea95bab6e4ee20abff0f5dfec6ead"},{name:"luna_pinyin_fluency.schema.yaml",md5:"2be9abb3c612c1479a7e2712b5b5cd39"},{name:"luna_quanpin.prism.bin",md5:"de0b1974ded4038dc2bea8e4c4e912d2"},{name:"luna_quanpin.schema.yaml",md5:"217dcb807feff1c3a11e664c05f8ac62"}],cantonese:qa,"double-pinyin":[{name:"double_pinyin.prism.bin",md5:"ebe88ee6e183f57f385b26f407508b2d"},{name:"double_pinyin.schema.yaml",md5:"37d4bbe21afc6ecbffef32035853a62f"},{name:"double_pinyin_abc.prism.bin",md5:"6a9b3f79d7c8b0caaf32aa649c02b65d"},{name:"double_pinyin_abc.schema.yaml",md5:"c19a099692bfff3d2292f31cae94f1f3"},{name:"double_pinyin_flypy.prism.bin",md5:"f9f5a25e674bcd94999947baa0ea7212"},{name:"double_pinyin_flypy.schema.yaml",md5:"20da2434e8413cfee9a16862b5de94e7"},{name:"double_pinyin_mspy.prism.bin",md5:"0d0e95e701e381b790d91bea3d9c26cd"},{name:"double_pinyin_mspy.schema.yaml",md5:"da893bb1ccb222953447bc03e28a7aa3"},{name:"double_pinyin_pyjj.prism.bin",md5:"869d45bd575161358073112c6e220dd6"},{name:"double_pinyin_pyjj.schema.yaml",md5:"fa420f3c963b79af67c8c52c27cbffc2"}],wubi:Ea,"pinyin-simp":[{name:"pinyin_simp.prism.bin",md5:"3b1037493ae93c1f7ae64bea9bc16650"},{name:"pinyin_simp.reverse.bin",md5:"a7691b570c4c4a1a8ca6339f9b6338e8"},{name:"pinyin_simp.schema.yaml",md5:"7101abebdd3155a77b545ed7a19b3681"},{name:"pinyin_simp.table.bin",md5:"18cdf4674c35c6694f96ab10df5ee7be"}],"terra-pinyin":[{name:"terra_pinyin.prism.bin",md5:"ab694f25ee6ee00f010de4d9a5df7245"},{name:"terra_pinyin.reverse.bin",md5:"c2b4ebbd44eb9a57aa1f6e263001e83c"},{name:"terra_pinyin.schema.yaml",md5:"e1d2aabdde916f7bb782d4e924b529c7"},{name:"terra_pinyin.table.bin",md5:"aac5fdf8846b9eac8dc031fd6f8f1bdf"}],ipa:Fa,bopomofo:Ca,"combo-pinyin":[{name:"combo_pinyin.prism.bin",md5:"c6d468e4b7f88a824e32602624205ec1"},{name:"combo_pinyin.schema.yaml",md5:"1b0f5fc4b8270db662ce882b4ed96a2d"},{name:"combo_pinyin_10.schema.yaml",md5:"94fed0d8c33755f12ba9ec97cc41da35"},{name:"combo_pinyin_8.schema.yaml",md5:"ebd27fb7db368986561c54ad429dd56d"},{name:"combo_pinyin_9.schema.yaml",md5:"e5fc98fcf97bd2d2461d0e5969a8c535"}],"middle-chinese":[{name:"sampheng.prism.bin",md5:"edccb12d4111233c6c02cccd989c195b"},{name:"sampheng.schema.yaml",md5:"47d5a80503aac65038f641958672829b"},{name:"zyenpheng.prism.bin",md5:"7ad3323279ae37dbdaf2dd4b804b8618"},{name:"zyenpheng.reverse.bin",md5:"0d3b84ce7e7b2714cb4a0eea35536d38"},{name:"zyenpheng.schema.yaml",md5:"e7c18923cb4e305362f0b7ae48b2c329"},{name:"zyenpheng.table.bin",md5:"dc2e6122b5e0753e6c12887d21c38195"}],cangjie:Oa,stroke:La,array:Aa,wugniu:Ta,soutzoe:Wa,stenotype:Va,scj:Na,quick:Ra};const j="/rime",Ka="/usr/share/rime-data";function Ua(e,n){return`ime/${e}/${n}`}const Ja=new Z("ime");async function Xa(e){const n=[];function a(i){if(n.includes(i))return[];n.push(i);const c=[];for(const M of Pa[i]||[])c.push(...a(M));const{dict:o,prism:s}=fe[i],t=o||i,p=`${t}.table.bin`,m=`${t}.reverse.bin`,x=`${s||t}.prism.bin`,ni=`${i}.schema.yaml`,F=Ze[i];for(const M of[p,m,x,ni])for(const{name:C,md5:ei}of Ha[F])if(M===C){c.push({name:C,md5:ei,target:F});break}return c}const r=a(e);await Promise.all(r.map(async({name:i,target:c,md5:o})=>{const s=`${Ka}/build/${i}`;try{Module.FS.lookupPath(s)}catch{const t=await Ja.get(i,o,Ua(c,i));Module.FS.writeFile(s,new Uint8Array(t))}}))}async function Ga(e){return k||await Xa(e),Module.ccall("set_ime","null",["string"],[e]),y("write")}function y(e){let n,a;const r=new Promise((i,c)=>{n=i,a=c});return Module.FS.syncfs(e==="read",i=>{i&&a(i),n(null)}),r}const Qa=A("rime.js",{url:"",async init(){Module.FS.mkdir(j),Module.FS.mount(IDBFS,{},j),await y("read"),Module.ccall("init","null",[],[]);for(const[e,n]of Object.entries(Fn))Module.ccall("set_schema_name","null",["string","string"],[e,n])},Module:{printErr(e){const n=e.match(/[EWID]\S+ \S+ \S+ (.*)/);n?{E:console.error,W:console.warn,I:console.info,D:console.debug}[e[0]](n[1]):console.error(e)}}});let k=!1;const Ya=L("deployStatus");globalThis._deployStatus=(e,n)=>{e==="success"&&(k=!0),Ya(e,n)};function E(e){for(const n of Module.FS.readdir(e)){if(n==="."||n==="..")continue;const a=`${e}/${n}`,{mode:r}=Module.FS.lstat(a);Module.FS.isDir(r)?(E(a),Module.FS.rmdir(a)):Module.FS.unlink(a)}}async function Za(){E(j),await y("write"),k=!1,Module.ccall("reset","null",[],[])}O({fsOperate:T,resetUserDirectory:Za,setIME:Ga,setOption(e,n){return Module.ccall("set_option","null",["string","number"],[e,n])},setPageSize(e){return Module.ccall("set_page_size","null",["number"],[e])},deploy(){return Module.ccall("deploy","null",[],[])},async process(e){const n=JSON.parse(Module.ccall("process","string",["string"],[e]));return"committed"in n&&await y("write"),n},selectCandidateOnCurrentPage(e){return Module.ccall("select_candidate_on_current_page","string",["number"],[e])}},Qa)})();
